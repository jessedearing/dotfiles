#compdef rails

function _rails() {
  local -a _1st_args
  _1st_args=(
    'generate:Generate new code'
    'console:Start the Rails console'
    'server:Start the Rails server'
    'dbconsole:Start a console for the database specified in config/database.yml'
    'new:Create a new Rails application'
    'application:Generate the Rails application code'
    'destroy:Undo code generate with "generate"'
    'profiler:Get profile information from a piece of code'
    'plugin:Install a plugin'
    'runner:Run a piece of code in the application environment'
  )

  if (( CURRENT == 2)); then
    _describe -t commands "rails subcommand" _1st_args
    return
  fi

  if (( CURRENT == 3)); then
    case $words[2] in
    generate)
    esac
  fi
}

_rails
